<head>
  <meta charset="UTF-8">
</head>
<body></body>
<script src="../index2.js"></script>
<script>
const div = el('div')
const button = el('button')
const click = on('click')

const count = makeState(0, {
  actions: {
    increment: v => v + 1,
    decrement: v => v - 1,
  },
  views: {
    enough: v => v >= 2,
    positive: v => v > 0,
  },
})

const items = makeState([
  { name: 'foo' },
  { name: 'bar' },
  { name: 'baz' },
  { name: 'qux' },
  { name: 'quux' },
], {
  key: 'name',
  actions: {
    add: v => [...v, { name: performance.now() }],
    del: (v, item) => v.filter(x => x !== item),
    reverse: v => [...v].reverse(),
  },
})

const a = makeState(true)
const b = makeState(false)
const c = makeState(false)

const app =
  div('.class', '@name', '#id')
    (get`The count is: ${count}`)
    (ternary(count.positive)
      (div('Positive'))
      (div('Zero or less'))
    )
    (button('Increment', click(count.increment)))
    (button('Decrement', click(count.decrement)))
    (when(a.and(b).or(c).not())
      (div('Boo!'))
      (div('Foo!'))
      (div('Cool'))
    )
    (button('Add', click(items.add)))
    (iter(items)(q =>
      div(get`${q.i} - ${q.name}`, click(() => items.del(q.$)))
    ))

app(document.body)
</script>